{"ast":null,"code":"import { map, switchMap } from 'rxjs/operators';\nimport { Subscription } from 'rxjs';\nimport { Section } from '../../../models';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../../services/section.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../../nav/nav.component\";\nimport * as i5 from \"../../../contact/contact.component\";\nconst _c0 = [\"selectedThis\"];\nconst _c1 = [\"selectedThat\"];\nconst _c2 = [\"selectedThats\"];\nfunction InvestigationDetailComponent_div_2_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const error_r6 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(error_r6);\n  }\n}\nfunction InvestigationDetailComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵelementStart(1, \"ul\", 16);\n    i0.ɵɵtemplate(2, InvestigationDetailComponent_div_2_li_2_Template, 2, 1, \"li\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.selectedInvestigationErrors);\n  }\n}\nconst _c3 = function (a1) {\n  return [\"/home/investigation/details\", a1];\n};\nfunction InvestigationDetailComponent_li_7_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const investigationDTitle_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(2, _c3, investigationDTitle_r7._id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(investigationDTitle_r7.title);\n  }\n}\nfunction InvestigationDetailComponent_li_7_a_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const investigationDTitle_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(investigationDTitle_r7.title);\n  }\n}\nfunction InvestigationDetailComponent_li_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 18);\n    i0.ɵɵtemplate(1, InvestigationDetailComponent_li_7_a_1_Template, 2, 4, \"a\", 19);\n    i0.ɵɵtemplate(2, InvestigationDetailComponent_li_7_a_2_Template, 2, 1, \"a\", 20);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const investigationDTitle_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", investigationDTitle_r7.title !== \"Investigations Home\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", investigationDTitle_r7.title === \"Investigations Home\");\n  }\n}\nexport let InvestigationDetailComponent = /*#__PURE__*/(() => {\n  class InvestigationDetailComponent {\n    constructor(route, investigationService, el, renderer) {\n      this.route = route;\n      this.investigationService = investigationService;\n      this.el = el;\n      this.renderer = renderer;\n      this.selectedInvestigationErrors = [];\n      this.investigationsDetail = [];\n      this.investigationsDetailSubscription = new Subscription();\n      this.sInvestigationD = new Section();\n      this.sInvestigationDStart = this.navInvestigationD();\n      this.sInvestigationDSubscription = new Subscription();\n      this.sInvestigation = new Section();\n      this.sInvestigationSubscription = new Subscription();\n    }\n    onWindowResize() {\n      this.getScreenWidth = window.innerWidth;\n      this.getScreenHeight = window.innerHeight;\n      // console.log(this.getScreenHeight, this.getScreenWidth);\n      this.adjustFontSize();\n    }\n    ngOnInit() {\n      this.sInvestigationSubscription = this.route.paramMap.pipe(map(params => params.get('id')), switchMap(id => this.investigationService.getSection(id))).subscribe({\n        next: sInvestigation => {\n          this.sInvestigation = sInvestigation;\n          this.adjustFontSize();\n        },\n        error: error => this.handleSelectedInvestigationErrors(error.error.message)\n      });\n      this.investigationsDetailSubscription = this.investigationService.getSections().subscribe({\n        next: investigationsDetail => {\n          for (let investigationD in investigationsDetail) {\n            if (investigationsDetail[investigationD].title.slice(investigationsDetail[investigationD].title.length - 14, investigationsDetail[investigationD].title.length) === 'Investigations') {\n              this.investigationsDetail.push(investigationsDetail[investigationD]);\n            }\n            if (investigationsDetail[investigationD].title === 'Investigations Home') {\n              this.investigationsDetail.push(investigationsDetail[investigationD]);\n            }\n            console.log(investigationsDetail[investigationD].title, investigationsDetail[investigationD].title.length);\n          }\n        },\n        error: error => this.handleSelectedInvestigationErrors(error.error)\n      });\n    }\n    adjustFontSize() {\n      const elementH = this.selectedThis.nativeElement;\n      const element = this.sInvestigation.title;\n      const textContent = element || '';\n      const textLength = textContent.length || 1;\n      console.log('\\ntextLength', textLength, '\\nthis.sInvestigation', this.sInvestigation);\n      if (textLength > 31) {\n        this.renderer.setStyle(elementH, 'white-space', `normal`);\n      } else {\n        this.renderer.setStyle(elementH, 'white-space', `nowrap`);\n      }\n      if (textLength <= 30) {\n        this.renderer.setStyle(elementH, 'letter-spacing', '0px');\n      } else {\n        this.renderer.setStyle(elementH, 'letter-spacing', '-3px');\n      }\n    }\n    navInvestigationD() {\n      this.sInvestigationDSubscription = this.route.paramMap.pipe(map(params => params.get('id')), switchMap(id => this.investigationService.getSection(id))).subscribe({\n        next: sInvestigationD => {\n          this.sInvestigationD = sInvestigationD;\n        },\n        error: error => this.handleSelectedInvestigationErrors(error.error.message)\n      });\n    }\n    handleSelectedInvestigationErrors(errors) {\n      this.selectedInvestigationErrors = Array.isArray(errors) ? errors : [errors];\n    }\n    ngAfterViewInit() {\n      this.adjustFontSize();\n    }\n    ngOnDestroy() {\n      this.sInvestigationSubscription.unsubscribe();\n      this.sInvestigationDSubscription.unsubscribe();\n      this.investigationsDetailSubscription.unsubscribe();\n    }\n  }\n  InvestigationDetailComponent.ɵfac = function InvestigationDetailComponent_Factory(t) {\n    return new (t || InvestigationDetailComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.SectionService), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2));\n  };\n  InvestigationDetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: InvestigationDetailComponent,\n    selectors: [[\"app-investigation-detail\"]],\n    viewQuery: function InvestigationDetailComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n        i0.ɵɵviewQuery(_c1, 7);\n        i0.ɵɵviewQuery(_c2, 7);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.selectedThis = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.selectedThat = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.selectedThats = _t.first);\n      }\n    },\n    hostBindings: function InvestigationDetailComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"resize\", function InvestigationDetailComponent_resize_HostBindingHandler($event) {\n          return ctx.onWindowResize($event);\n        }, false, i0.ɵɵresolveWindow);\n      }\n    },\n    decls: 20,\n    vars: 8,\n    consts: [[\"id\", \"selectedInvestigation\"], [\"class\", \"row\", 4, \"ngIf\"], [3, \"selectedNavSection\"], [\"id\", \"investigationsDetailHolder\", 1, \"row\"], [\"id\", \"investigationsDetailTitles\", 1, \"\"], [\"id\", \"investigationsDetailTitlesTable\", 1, \"row\"], [\"class\", \"investigationsDetailListItem\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"investigationsMainHolder\", 1, \"\"], [\"selectedThat\", \"\"], [\"id\", \"sInvestigationTitleId\", 1, \"sInvestigationTitle\"], [\"selectedThis\", \"\"], [1, \"sInvestigationImage\", 3, \"src\", \"alt\"], [\"selectedThats\", \"\"], [1, \"sInvestigationContent\"], [\"routerLink\", \"/home/investigations\", 1, \"btn\", \"btn-primary\", \"sInvestigationButton\"], [1, \"row\"], [1, \"alert\", \"alert-danger\"], [4, \"ngFor\", \"ngForOf\"], [1, \"investigationsDetailListItem\"], [\"class\", \"investigationsDetailListItemAtag\", 3, \"routerLink\", 4, \"ngIf\"], [\"routerLink\", \"/home/investigations\", \"class\", \"investigationsDetailListItemAtag\", 4, \"ngIf\"], [1, \"investigationsDetailListItemAtag\", 3, \"routerLink\"], [\"routerLink\", \"/home/investigations\", 1, \"investigationsDetailListItemAtag\"]],\n    template: function InvestigationDetailComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0);\n        i0.ɵɵelementStart(1, \"fieldset\");\n        i0.ɵɵtemplate(2, InvestigationDetailComponent_div_2_Template, 3, 1, \"div\", 1);\n        i0.ɵɵelement(3, \"app-nav\", 2);\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵelementStart(5, \"div\", 4);\n        i0.ɵɵelementStart(6, \"ul\", 5);\n        i0.ɵɵtemplate(7, InvestigationDetailComponent_li_7_Template, 3, 2, \"li\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 7, 8);\n        i0.ɵɵelementStart(10, \"h1\", 9, 10);\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(13, \"img\", 11, 12);\n        i0.ɵɵelementStart(15, \"p\", 13);\n        i0.ɵɵtext(16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"button\", 14);\n        i0.ɵɵtext(18, \"Go Back\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(19, \"app-contact\");\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectedInvestigationErrors.length);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"selectedNavSection\", ctx.sInvestigationD);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.investigationsDetail);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.sInvestigation == null ? null : ctx.sInvestigation.title);\n        i0.ɵɵadvance(1);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.sInvestigation == null ? null : ctx.sInvestigation.sectionImagePath, i0.ɵɵsanitizeUrl);\n        i0.ɵɵpropertyInterpolate2(\"alt\", \"The picture \", ctx.sInvestigation == null ? null : ctx.sInvestigation.sectionImage == null ? null : ctx.sInvestigation.sectionImage.filename, \" of \", ctx.sInvestigation == null ? null : ctx.sInvestigation.title, \" was not available.\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.sInvestigation == null ? null : ctx.sInvestigation.content);\n      }\n    },\n    directives: [i3.NgIf, i3.NgForOf, i4.NavComponent, i1.RouterLinkWithHref, i1.RouterLink, i5.ContactComponent],\n    styles: [\"section#selectedInvestigation[_ngcontent-%COMP%], app-contact[_ngcontent-%COMP%]{position:relative}div#investigationsDetailHolder[_ngcontent-%COMP%]{display:flex}div#investigationsDetailTitles[_ngcontent-%COMP%]{width:20%;display:flex;justify-content:center;align-items:center;text-align:center}ul#investigationsDetailTitlesTable[_ngcontent-%COMP%]{display:inline-table}li.investigationsDetailListItem[_ngcontent-%COMP%]{list-style:none;margin-bottom:1.5%}a.investigationsDetailListItemAtag[_ngcontent-%COMP%]{text-decoration:none;font-size:1.5rem;background-color:#fff}div#investigationsMainHolder[_ngcontent-%COMP%]{width:80%;display:flex;justify-content:center;align-items:center;flex-direction:column}img.sInvestigationImage[_ngcontent-%COMP%]{height:55%;width:70%;margin-bottom:1.5%}p.sInvestigationContent[_ngcontent-%COMP%]{width:70%;margin-bottom:1%;background-color:#fff;text-align:justify;font-size:1.5vw}h1.sInvestigationTitle[_ngcontent-%COMP%]{margin-bottom:1%;width:70%;text-align:center;background-color:#fff;font-size:4vw;white-space:nowrap;letter-spacing:-3px}button.sInvestigationButton[_ngcontent-%COMP%]{margin-bottom:3%}\"]\n  });\n  return InvestigationDetailComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}